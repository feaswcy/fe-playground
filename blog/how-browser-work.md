---
title: 浏览器的一点知识
date: 2017-01-30 16:47:45
tags: notes
---

## 浏览器的渲染机制

参考文章：http://www.jianshu.com/p/c9049adff5ec

*测试浏览器为chrome*

## 浏览器处理页面的过程

1. 浏览器请求到HTML代码后，在生成dom开始前，并行发起css、图片、js的请求。
2. 下载CSS文件，开始构建CSSOM
3. 所有CSS文件下载完成后与內联样式和行内样式按照优先级规则一起生成 Render Tree。
4. 布局与绘制，有了render tree，浏览器根据样式计算出dom元素在屏幕上的具体位置，根据对应的属性计算出来

## 浏览器引入资源策略
下载是dom构建前就开始进行的，浏览器在处理dom中引入外部资源时有不同的策略
### 引入图片

引入图片时，不会阻塞dom的构建和渲染

### 引入样式

引入样式时，浏览器会等待样式下载完成并解析后，与其他地方出现的样式按照样式优先级规则生成最后的render tree，然后根据再dom结构进行渲染，但是在html文件比较大而且样式写在了底部，浏览器会有优化行为。

### 引入js

使用script标签引入样式将会导致dom解析出现挂起状态，一直到script中的内容下载并且运行完成，这样做的原因是js会改变dom的结构或者对页面样式进行读取和修改





## 当页面比较大的时候浏览器的优化

当页面中dom结构比较复杂或者代码量比较大时，可能是基于用户体验，浏览器会有一些优化，主要表现出来就是html会分段渲染，先渲染一部分dom，接下来在渲染剩下的部分，此时如果在页面底部link引入了样式文件并且影响到了之前已经渲染的dom，那么浏览器会重绘。


